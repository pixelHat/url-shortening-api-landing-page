(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();function a({originalUrl:l,shortedUrl:e}){const t=i();return console.log("urls",t),t.push({originalUrl:l,shortedUrl:e}),localStorage.setItem("urls",JSON.stringify(t)),{originalUrl:l,shortedUrl:e}}function i(){return JSON.parse(localStorage.getItem("urls"))||[]}function d(l){return fetch(`https://api.shrtco.de/v2/shorten?url=${l}`)}function u(l){const e=l.querySelector("button"),t=l.querySelector("[data-link]").innerHTML;e.addEventListener("click",()=>{navigator.clipboard.writeText(t),e.dataset.active=!0,e.innerHTML="Copied!";const o=setTimeout(()=>{e.removeAttribute("data-active"),e.innerHTML="Copy",clearTimeout(o)},800)})}function m({originalUrl:l,shortedUrl:e}){const t=document.createElement("li");t.className="shorten-card p-4 lg:py-4 lg:px-6";const o=document.createElement("span");o.classList.add("raw"),o.innerText=l;const r=document.createElement("hr");r.className="divider lg:hidden";const n=document.createElement("a");n.classList.add("url"),n.href=e,n.dataset.link=!0,n.innerText=e;const s=document.createElement("button");return s.classList.add("button"),s.innerText="Copy",t.appendChild(o),t.appendChild(r),t.appendChild(n),t.appendChild(s),t}function c({originalUrl:l,shortedUrl:e}){const t=document.querySelector("[data-shorten-cards]"),o=m({originalUrl:l,shortedUrl:e});u(o),t.appendChild(o)}window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-menu]").forEach(e=>{const t=e.dataset.menu,o=document.getElementById(t);e.addEventListener("click",()=>o.classList.toggle("open"))}),i().forEach(c),document.querySelectorAll("[data-shorten-form]").forEach(e=>{const t=e.querySelector("input"),o=e.querySelector("[data-error]");e.querySelector("button").addEventListener("click",()=>{if(t.value.length===0){t.classList.add("error"),o.classList.remove("hidden");return}t.classList.remove("error"),o.classList.add("hidden"),d(t.value).then(n=>n.json()).then(n=>({originalUrl:t.value,shortedUrl:n.result.short_link})).then(a).then(c)})})});
